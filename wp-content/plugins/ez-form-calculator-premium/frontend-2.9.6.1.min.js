jQuery(document).ready(function(a){function g(c){var d=a(c),f=d.data("id");e[f]=d.data("vars"),"object"!=typeof e[f]&&(e[f]=a.parseJSON(d.data("vars"))),b[f]=[],1==e[f].price_show_request&&r(f,!1),d.find(".ezfc-element-datepicker").each(function(){var b=a(this),c={};b.data("settings")&&(c=b.data("settings")),b.datepicker({dateFormat:e[f].datepicker_format,minDate:c.minDate?c.minDate:"",maxDate:c.maxDate?c.maxDate:"",numberOfMonths:c.numberOfMonths?parseInt(c.numberOfMonths):1,showAnim:c.showAnim?c.showAnim:"fadeIn",showWeek:"1"==c.showWeek?c.showWeek:!1,firstDay:c.firstDay?c.firstDay:!1})}),d.find(".ezfc-element-timepicker").each(function(){var b=a(this),c={};b.data("settings")&&(c=b.data("settings")),b.timepicker({minTime:c.minTime?c.minTime:null,maxTime:c.maxTime?c.maxTime:null,step:c.step?c.step:30,timeFormat:c.format?c.format:e[f].timepicker_format})}),d.find(".ezfc-element-daterange").each(function(){var b=a(this),c=e[f].datepicker_format;b.hasClass("ezfc-element-daterange-from")?b.datepicker({dateFormat:c,minDate:b.data("mindate"),maxDate:b.data("maxdate"),onSelect:function(d){var e=b.data("mindays")||0,f=a.datepicker.parseDate(c,d);f.setDate(f.getDate()+e),b.siblings(".ezfc-element-daterange-to").datepicker("option","minDate",f),b.trigger("change")}}):b.datepicker({dateFormat:e[f].datepicker_format,minDate:b.data("mindate"),maxDate:b.data("maxdate"),onSelect:function(d){var e=b.data("mindays")||0,f=a.datepicker.parseDate(c,d);f.setDate(f.getDate()-e),b.siblings(".ezfc-element-daterange-from").datepicker("option","maxDate",f),b.trigger("change")}})}),d.find(".ezfc-element-colorpicker").each(function(){var b=a(this),c=b.parents(".ezfc-element").find(".ezfc-element-colorpicker-input"),e=b.colorpicker({container:b}).on("changeColor.colorpicker",function(a){b.css("background-color",a.color.toHex()),c.val(a.color.toHex())});a(c).on("click focus",function(){e.colorpicker("show")}).on("change",function(){e.colorpicker("setValue",d.val())})});var g=d.find(".ezfc-step");if(g.length>0){var h=g.last();d.find(".ezfc-summary-wrapper").appendTo(h),d.find(".ezfc-submit-wrapper").appendTo(h).addClass("ezfc-submit-step"),D(h.find("input"),d)}if(a(".ezfc-custom-element[data-group]").each(function(){var b=a(this),c=b.data("group"),d=a("#ezfc_element-"+c);if("group"==d.data("element")&&d.length>0){var e=d.find("> .ezfc-group-elements");b.appendTo(e)}}),p(d),C(d),e[f].use_woocommerce){var i=".woocommerce form.cart, .woocommerce .price";a(i).hide()}var j=parseInt(e[f].step_indicator_start)+1;j>1&&d.find(".ezfc-step-indicator").hide(),"2"==ezfc_vars.debug_mode&&(d.append("<button id='ezfc-show-all-elements'>Show/hide elements</button>"),a("#ezfc-show-all-elements").click(function(){return d.hasClass("ezfc-debug-visible")?(d.removeClass("ezfc-debug-visible"),d.find(".ezfc-tmp-visible").removeClass("ezfc-tmp-visible").hide()):(d.addClass("ezfc-debug-visible"),d.find(".ezfc-hidden").addClass("ezfc-tmp-visible").show().css("display","inline-block")),!1})),e[f].use_stripe&&"undefined"!=typeof Stripe&&Stripe.setPublishableKey(ezfc_vars.stripe.publishable_key)}function h(b){var c=a(b).data("id");return z(b),e[c].price_requested=0,e[c].summary_shown=0,a(b).find(".ezfc-summary-wrapper").fadeOut(),1==e[c].price_show_request?(r(c,!1),!1):(p(b),void C(b))}function i(b,d,f,g){var h=a(b),i=h.closest(".ezfc-wrapper"),j=h.data("id");h.find(".ezfc-submit-icon").addClass("ezfc-submit-icon-show");var k=h.find(".ezfc-submit-icon"),l=h.find("input[type='submit']");if(g)return k.fadeOut(),l.prop("disabled",!1),i.find(".ezfc-payment-submit, .ezfc-payment-cancel").prop("disabled",!1),e[j].stripe_cc_info_shown=0,!1;if("stripe"==f){var m=a("#ezfc-stripe-form-"+j),n=q(j,c[j],!1,!1,!0);if(m.find(".ezfc-payment-price").text(n),e[j].stripe_cc_info_shown){var m=a("#ezfc-stripe-form-"+j);ezfc_payment_form_id=j,Stripe.card.createToken(m,F),m.find(".ezfc-payment-submit, .ezfc-payment-cancel").prop("disabled",!0)}else e[j].stripe_cc_info_shown=1,a("#ezfc-stripe-form-"+j+", #ezfc-stripe-form-modal-"+j).addClass("ezfc-payment-dialog-open");return k.fadeOut(),!1}k.fadeIn(),l.prop("disabled",!0),h.find(".ezfc-custom-hidden:not(.ezfc-element-wrapper-fileupload)").each(function(){a(this).find("input, :selected").val("__HIDDEN__").addClass("ezfc-has-hidden-placeholder");var b=a(this).find(".ezfc-element-radio:not(:has(:radio:checked))");b.length&&a(b).first().find("input").prop("checked",!0)});var o="id="+j+"&"+h.serialize();o+="&url="+encodeURI(window.location.href),0==e[j].price_requested&&(o+="&price_requested=1"),0==e[j].summary_shown&&(o+="&summary=1"),-1!=d&&(o+="&step="+d),e[j].preview&&(o+="&preview="+e[j].preview),E("ezfc_before_submission",{form:h,form_vars:e[j],id:j}),a.ajax({type:"post",url:ezfc_vars.ajaxurl,data:{action:"ezfc_frontend",data:o},success:function(c){if(a(".ezfc-submit-icon").removeClass("ezfc-submit-icon-show"),l.removeAttr("disabled"),k.fadeOut(),I(c),c=a.parseJSON(c),!c)return h.find(".ezfc-message").text("Something went wrong. :("),"undefined"!=typeof Recaptcha&&Recaptcha.reload(),u(b,!0),!1;if(c.error){if(u(b,!0),c.id){var f=!0,g="#ezfc_element-"+c.id,m=a(g).find(".ezfc-element").first(),n=h.find(".ezfc-step-active").length>0?!0:!1;if(n){var o=parseInt(a(g).parents(".ezfc-step").data("step"));o!=d&&-1!=d&&(f=!1,w(b,d+1))}if(f){m.length||(m=a(g));var q=new Opentip(m,{delay:800,hideDelay:.1,hideTriggers:["closeButton","target"],removeElementsOnHide:!0,showOn:null,target:g,tipJoint:ezfc_vars.required_text_position||"middle right"});if(q.setContent(c.error),q.show(),"undefined"!=typeof ezfc_vars.required_text_auto_hide){var s=1e3*parseFloat(ezfc_vars.required_text_auto_hide);s>0&&setTimeout(function(){q&&q.hide()},s)}e[j].disable_error_scroll||x(g)}}else{var t;t=i.find(".ezfc-payment-dialog-open").length>0?i.find(".ezfc-payment-errors"):h.parents(".ezfc-wrapper").find(".ezfc-message"),t.text(c.error).fadeIn().delay(7500).fadeOut()}return"undefined"!=typeof Recaptcha&&Recaptcha.reload(),!1}if(c.step_valid)return u(b),w(b,d+1),!1;if(c.summary)return h.find(".ezfc-summary-wrapper").fadeIn().find(".ezfc-summary").html(c.summary),e[j].summary_shown=1,u(b),!1;if("undefined"!=typeof Recaptcha&&Recaptcha.reload(),c.paypal)l.attr("disabled","disabled"),window.location.href=c.paypal;else{if(c.price_requested||0===c.price_requested)return void r(j,!0,c.price_requested);var y={form:h,form_vars:e[j],id:j,price:price,response:c};E("ezfc_submission_success",y),e[j].submission_js_func&&"function"==typeof window[e[j].submission_js_func]&&window[e[j].submission_js_func](y),i.find(".ezfc-payment-dialog, .ezfc-payment-dialog-modal").removeClass("ezfc-payment-dialog-open");var z=a(".ezfc-success-text[data-id='"+j+"']");if(z.html(c.success),1==e[j].reset_after_submission)return v(b),void z.fadeIn().delay(7500).fadeOut();if(1==e[j].hide_all_forms?a(".ezfc-form, .ezfc-required-notification").fadeOut():(h.fadeOut(),h.find(".ezfc-required-notification").fadeOut()),1==e[j].scroll_to_success_message?z.fadeIn(400,function(){x(z,-200)}):z.fadeIn(),e[j])if("undefined"!=typeof e[j].redirect_url&&e[j].redirect_url.length>0){var A="";1==e[j].redirect_forward_values&&(A=h.serialize());var B=-1==e[j].redirect_url.indexOf("?")?"?":"&";window.location.href=e[j].redirect_url+B+A}else if("undefined"!=typeof e[j].refresh_page_after_submission&&1==e[j].refresh_page_after_submission){var C=Math.max(0,Math.abs(parseInt(e[j].redirect_timer)));setTimeout(function(){window.location.reload()},1e3*C)}}}})}function j(c,d,e,f){var g=e.data("value_external");if(g&&a(g).length>0){var h;h=a(g).is("input[type='radio']")?a(g).find(":checked").val():a(g).is("input, input[type='text'], textarea")?a(g).val():a(g).is("select")?a(g).find(":selected").text():a(g).text(),"input"==f||"numbers"==f||"subtotal"==f?e.find("input").val(h):"dropdown"==f?(e.find(":selected").removeAttr("selected"),e.find("option[value='"+h+"']").attr("selected","selected")):"radio"==f?(e.find(":checked").removeAttr("checked"),e.find("input[value='"+h+"']").attr("checked","checked")):"checkbox"==f?(e.find(":checked").removeAttr("checked"),e.find("input[value='"+h+"']").attr("checked","checked")):"textfield"==f&&e.find("textarea").val(h),b[d][g]||(b[d][g]=1,a(g).on("change keyup",function(){p(a(c))}))}}function k(b,c,d,f){var g=d.data("conditional_action"),h=d.data("conditional_operator"),i=d.data("conditional_target"),j=d.data("conditional_values"),k=d.data("conditional_target_value"),l=d.data("conditional_notoggle"),m=d.data("conditional_redirects"),n=d.data("conditional_use_factor"),o=d.data("conditional_row_operator");if(g&&0!=g){var p=g.toString().split(","),q=h.toString().split(","),r=i.toString().split(","),s=j.toString().split(","),t=k.toString().split(","),u=l.toString().split(","),v=m.toString().split(","),x=n.toString().split(","),z=o.toString().split(","),B=y(d,null,!d.data("is_currency")),C=1;a.each(p,function(g,h){var i;if(i="submit_button"==r[g]?a(b).find(".ezfc-submit"):a("#ezfc_element-"+r[g]),!(i.length<1&&v.length<1)){1==x[g]&&(C=parseFloat(C),isNaN(C)||(B*=C));var j=[{operator:q[g],value:s[g]}],k=d.data("conditional_chain_length");if(k>0){var l=d.data("conditional_operator_chain_"+g),m=d.data("conditional_value_chain_"+g);if(l){var n=l.toString().split(","),o=m.toString().split(",");a.each(n,function(a,b){j.push({operator:b,value:o[a]})})}}var p=!1;a.each(j,function(a,b){var c=b.value;if(c=1==d.data("is_currency")&&"in"!=b.operator?parseFloat(b.value):b.value,"input"==f)p=c.toLowerCase()==i.val().toLowerCase();else{var e=b.value.split(":");switch(b.operator){case"gr":p=B>c;break;case"gre":p=B>=c;break;case"less":p=c>B;break;case"lesse":p=c>=B;break;case"equals":p=B==c;break;case"between":p=e.length<2?!1:B>=e[0]&&B<=e[1];break;case"not":p=e.length<2?B!=c:B<e[0]&&B>e[1];break;case"hidden":p=d.hasClass("ezfc-custom-hidden");break;case"visible":p=!d.hasClass("ezfc-custom-hidden");break;case"mod0":p=B>0&&B%c==0;break;case"mod1":p=B>0&&B%c!=0;break;case"bit_and":p=B&c;break;case"bit_or":p=B|c;break;case"empty":"undefined"==typeof B&&(p=!0),p="number"==typeof B?isNaN(B):B.length<1;break;case"notempty":p="undefined"==typeof B?!1:"number"==typeof B?!isNaN(B):B.length>0;break;case"in":if("undefined"==typeof B)p=!1;else{var h=c.split("|");p=!1;for(var j in h)if(B==h[j])return void(p=!0)}break;default:p=!1}}if("undefined"!=typeof z[g]&&1==z[g]){if(p)return!1}else if(!p)return!1});var y,D,E=u[g],F=i.data("element");if("group"==F&&i.push(a(i).find("> .ezfc-custom-element")),"set"==h&&p)"input"==F||"numbers"==F||"subtotal"==F||"set"==F?i.find("input").val(t[g]):"dropdown"==F?(i.find(":selected").removeAttr("selected"),i.find("option[data-value='"+t[g]+"']").prop("selected","selected")):"radio"==F?(i.find(":checked").removeAttr("checked"),i.find("input[data-value='"+t[g]+"']").prop("checked",!0)):"checkbox"==F?i.find("input[data-value='"+t[g]+"']").prop("checked",!0):i.text(t[g]);else if("activate"==h)p?"submit"==F?i.prop("disabled",!1):"group"==F?i.find("[data-calculate_enabled]").data("calculate_enabled",1):i.data("calculate_enabled",1):1!=E&&("submit"==F?i.prop("disabled",!0):"group"==F?i.find("[data-calculate_enabled]").data("calculate_enabled",0):i.data("calculate_enabled",0));else if("deactivate"==h)p?"submit"==F?i.prop("disabled",!0):"group"==F?i.find("[data-calculate_enabled]").data("calculate_enabled",0):i.data("calculate_enabled",0):1!=E&&("submit"==F?i.prop("disabled",!1):"group"==F?i.find("[data-calculate_enabled]").data("calculate_enabled",1):i.data("calculate_enabled",1));else if("redirect"==h&&p){var G=a(b).parents(".ezfc-wrapper").find(".ezfc-message");G.text(e[c].redirect_text).fadeIn(),a(b).fadeOut(),setTimeout(function(){window.location.href=v[g]},1e3*e[c].redirect_timer)}else if("step_goto"!=h&&"step_prev"!=h&&"step_next"!=h||!p){if("show"==h)y="removeClass",D="addClass";else{if("hide"!=h)return;y="addClass",D="removeClass"}p?(i[y]("ezfc-hidden ezfc-custom-hidden"),"show"==h?i.addClass("ezfc-fade-in"):a(i).fadeOut(500,function(){i.removeClass("ezfc-fade-in"),1==e[c].clear_selected_values_hidden&&A()})):1!=E&&(i[D]("ezfc-hidden ezfc-custom-hidden"),"show"==h?i.removeClass("ezfc-fade-in"):i.addClass("ezfc-fade-in"))}else{var H=parseInt(a(b).find(".ezfc-step-active").data("step")),I=0;switch(h){case"step_prev":if(0==H)return;I=H-1;break;case"step_next":var J=a(b).find(".ezfc-step-start").length;if(H==J-1)return;I=H+1;break;case"step_goto":var K=a(b).find(".ezfc-step-start[data-id='"+r[g]+"']");if(K.length<1)return;I=parseInt(K.data("step"))}w(a(b),I,0)}}})}}function l(b,c,d,e,f){var g=d.data("calculate_enabled"),h=d.data("calculate_operator")||0,i=d.data("calculate_target")||0,j=d.data("calculate_values")||0,k=d.data("overwrite_price"),l=d.data("add_to_price"),m=d.closest(".ezfc-step").length>0,n=d.find(".ezfc-element-numbers, .ezfc-element-input-hidden, .ezfc-element-subtotal, .ezfc-element-daterange-container, .ezfc-element-set, .ezfc-element-extension, :selected, :checked, .ezfc-element-custom-calculation"),o=["ceil","floor","round","abs","subtotal"];return a(n).each(function(b,c){var n={};a(this).data("settings")&&(n=a(this).data("settings"));var p=a(d).is(":visible");if(m&&!d.closest(".ezfc-step-active").length&&(p=!d.hasClass("ezfc-custom-hidden")),!(p||n.hasOwnProperty("calculate_when_hidden")&&0!=n.calculate_when_hidden||"hidden"==e))return void H("calculate",d,"Skipped as element is hidden and calculate_when_hidden is not enabled.");if(!(g&&0!=g||i||j||"set"==e||"subtotal"==e||"hidden"==e||"extension"==e||"custom_calculation"==e))return void H("calculate",d,"No target or values were found to calculate with. Subtotal, Hidden and Set elements are skipped.");if((!g||0==g)&&"custom_calculation"!=e)return void H("calculate",d,"Calculation is disabled.");var q=parseFloat(a(c).data("factor")),r=a(c).val(),s=y(d,null,!1),t=s/100,u=r.indexOf("%")>=0;(!s||isNaN(s))&&(s=0),q&&!isNaN(q)||0===q||(q=1);var v=s;switch(e){case"numbers":case"extension":v=s;break;case"hidden":if(a(c).data("use_woocommerce_price")){var w=parseFloat(a("meta[itemprop='price']").attr("content"));isNaN(w)&&(w=0),v=w,a(c).val(w)}else v=s;break;case"dropdown":case"radio":case"checkbox":v=parseFloat(a(c).data("value")),isNaN(v)&&(v=0);break;case"subtotal":v=f;break;case"daterange":var x=[a(c).find(".ezfc-element-daterange-from").datepicker("getDate"),a(c).find(".ezfc-element-daterange-to").datepicker("getDate")];v=J(x[0],x[1])*q;break;case"custom_calculation":var z=a(d).find(".ezfc-element-custom-calculation").data("function");if(v=window[z](f),g&&(v=parseFloat(v)),a(d).find(".ezfc-element-custom-calculation-input").val(v),2==ezfc_vars.debug_mode){var A=a(d).find(".ezfc-element-custom-calculation script").text();H("custom_calculation",d,"custom_calculation:\n"+A)}}u&&(v=f*t);var C=h.toString().split(",");if(calc_target_elements=i.toString().split(","),calc_custom_values=j.toString().split(","),C.length>0&&0!=C[0]&&a.each(C,function(b,e){if(!e)return void H("calculate",d,"#"+b+": No operator found here.");var g=[];if(-1==a.inArray(e,o)&&(g=a("#ezfc_element-"+calc_target_elements[b]),g.hasClass("ezfc-custom-hidden")))return void H("calculate",d,"#"+b+": Skipping this element as it is conditionally hidden.");var i,h=calc_custom_values[b];if(g.length>0){var j=g.data("element");if("numbers"==j||"subtotal"==j||"hidden"==j||"set"==j){var l=g.find("input"),m=parseFloat(l.data("factor"));(!m||isNaN(m))&&(m=1),i=B(l.val())*m}else if("dropdown"==j)i=parseFloat(g.find(":selected").data("value"));else if("radio"==j)i=parseFloat(g.find(":checked").data("value"));else if("checkbox"==j)i=0,g.find(":checked").each(function(b,c){i+=parseFloat(a(c).data("value"))});else if("daterange"==j){var n=[a(g).find(".ezfc-element-daterange-from").datepicker("getDate"),a(g).find(".ezfc-element-daterange-to").datepicker("getDate")],m=parseFloat(a(g).find(".ezfc-element-daterange-container").data("factor"));(!m||isNaN(m))&&(m=1),i=J(n[0],n[1])*m}else if("custom_calculation"==j){var p=a(g).find(".ezfc-element-custom-calculation"),q=p.data("function"),r=p.data("calculate_enabled");i=window[q](h),1==r&&(i=parseFloat(i))}else"starrating"==j&&(i=parseFloat(a(g).find(":checked").val()),isNaN(i)&&(i=0))}else"0"!=h&&(i=parseFloat(h));switch((!i||isNaN(i))&&(i=0),e){case"add":v+=i;break;case"subtract":v-=i;break;case"multiply":v*=i;break;case"divide":if(0==i)return void H("calculate",d,"#"+b+": Division by 0.");v/=i,"1"==a(c).data("calculate_before")&&(k=1,v=i/s);break;case"equals":v=i;break;case"power":v=Math.pow(v,i);break;case"ceil":v=Math.ceil(v);break;case"floor":v=Math.floor(v);break;case"round":v=Math.round(v);break;case"abs":v=Math.abs(v);break;case"subtotal":v=f;break;case"log":if(0==i)return;v=Math.log(i);break;case"log2":if(0==i)return;v=Math.log2(i);break;case"log10":if(0==i)return;v=Math.log10(i)}H("calculate",d,"#"+b+": operator = "+e+"\ntarget_value = "+i+"\ncalc_value = "+h+"\naddPrice = "+v)}),H("calculate",d,"\nprice = "+f+"\naddPrice = "+v+"\nfactor = "+q),1==l?"1"==k?f=v:"1"==g&&(f+=v):1==k&&(D=v),"subtotal"==e||"set"==e){var D;D=1==l&&1==k?f:v;var E=2;a(c).data("settings")&&(n=a(c).data("settings"),E=n.precision);var F=B(D.toFixed(E),!0);d.find("input").val(F)}}),f}function m(b,c,d,e,f){var g=d.data("discount_range_min"),h=d.data("discount_range_max"),i=d.data("discount_operator"),j=d.data("discount_values"),k=d.data("overwrite_price");if(j||0==j){var l=g.toString().split(","),m=h.toString().split(","),n=i.toString().split(","),o=j.toString().split(","),p=0,q=1;if("input"==e||"numbers"==e||"subtotal"==e||"hidden"==e||"extension"==e){var r=d.find("input");q=parseFloat(r.data("factor")),q&&!isNaN(q)||0===q||(q=1),p=B(r.val())}else if("dropdown"==e)p=parseFloat(d.find(":selected").data("value"));else if("radio"==e)p=parseFloat(d.find(":checked").data("value"));else if("checkbox"==e)p=0,d.find(":checked").each(function(b,c){p+=parseFloat(a(c).data("value"))});else if("daterange"==e){var s=[d.find(".ezfc-element-daterange-from").datepicker("getDate"),d.find(".ezfc-element-daterange-to").datepicker("getDate")];p=J(s[0],s[1])}a.each(n,function(b,c){if(!(o[b].length<1)){l[b]||0===l[b]||(l[b]=Number.NEGATIVE_INFINITY),m[b]||0===m[b]||(m[b]=Number.POSITIVE_INFINITY);var g;if(p>=parseFloat(l[b])&&p<=parseFloat(m[b])){var i,h=parseFloat(o[b]);switch(c){case"add":i=h,g=f+i,k?f=g:f+=g;break;case"subtract":i=h,g=f-i,k?f=g:f-=g;break;case"percent_add":i=p*q*(h/100),g=f+i,f=g;break;case"percent_sub":i=p*q*(h/100),g=f-i,f=g;break;case"equals":i=h,g=i,f=g}"subtotal"!=e||isNaN(g)||(g=B(g,!0),a(d).find("input").val(g)),H("discount",d,"discount = "+i+"\nprice after discount = "+f)}}})}return f}function n(b,c,d,e,f){var g=d.data("set_operator"),h=d.data("set_elements");if(h){var j,i=h.toString().split(",");a.each(i,function(b,c){var d=a("#ezfc_element-"+c);if(d){var e=y(d,null,!1);if(0==b)return void(j=e);switch(g){case"min":j>e&&(j=e);break;case"max":e>j&&(j=e);break;case"avg":case"sum":j+=e;break;case"dif":j-=e;break;case"prod":j*=e;break;case"quot":0!=e&&(j/=e)}}}),"avg"==g&&(j/=i.length),j=B(j,!0),d.find("input").val(j)}}function o(b){var c=0;return G(),a(b).find(".ezfc-custom-element").each(function(d,f){var g=a(b).data("id"),h=a(f),i=a(f).data("element");a(this).hasClass("ezfc-hidden")&&"subtotal"!=i&&"hidden"!=i&&1==e[g].calculate_old||(j(b,g,h,i),k(b,g,h,i),a(this).hasClass("ezfc-hidden")&&"subtotal"!=i&&"hidden"!=i||(n(b,g,h,i),c=l(b,g,h,i,c),c=m(b,g,h,i,c),k(b,g,h,i)))}),c}function p(b,d){var f=a(b).data("id");return d&&0===d||(price=o(a(b))),s(a(b)),1==e[f].price_show_request&&0==e[f].price_requested?void r(f,!1):("undefined"==typeof c[f]&&(c[f]=0),void(c[f]!=price&&(0!=e[f].counter_duration?a(b).find(".ezfc-price-value").countTo({from:c[f],to:price,speed:e[f].counter_duration,refreshInterval:e[f].counter_interval,formatter:function(a,b){return q(f,a)}}):a(b).find(".ezfc-price-value").text(q(f,price)),c[f]=price)))}function q(a,b,c,f,g){var h=d,i=c||e[a].currency;e[a].price_format&&e[a].price_format.length>0&&(h=e[a].price_format),f&&f.length>0&&(h=f),isNaN(b)&&(b=0);var j=numeral(b).format(h);return g&&(0==e[a].currency_position?j=i+j:j+=i),j}function r(b,d,f){var g=a(".ezfc-form[data-id='"+b+"']");d?(c[b]=0,e[b].price_requested=1,p(g,f),C(g)):(e[b].price_requested=0,a(g).find(".ezfc-price-value").text(e[b].price_show_request_before),a(g).find(".ezfc-submit").val(e[b].price_show_request_text))}function s(b){a(b).find("[data-element='subtotal']").each(function(c,d){var h,i,e=a(d).find(".ezfc-element-subtotal"),f=B(e.val()),g=null;e.data("settings")&&(h=e.data("settings"),g=h.price_format),i=q(a(b).data("id"),f,null,g),a(d).find(".ezfc-text").text(i)}),a(b).find("[data-element='set']").each(function(c,d){var h,i,e=a(d).find(".ezfc-element-set"),f=B(e.val()),g=null;e.data("settings")&&(h=e.data("settings"),g=h.price_format),i=q(a(b).data("id"),f,null,g),a(d).find(".ezfc-text").text(i)})}function t(){a(".ezfc-fixed-price").each(function(){var b=a(this).offset(),c=a(this).data("id"),d=a(".ezfc-form[data-id='"+c+"']"),f=d.outerHeight(),g=d.offset(),h=a(window).scrollTop(),i=parseFloat(e[c].price_position_scroll_top),j=g.top-h-i;0>j&&j>-f&&a(this).offset({top:h+i}),j>0&&b.top>g.top&&a(this).offset({top:g.top})})}function u(b,c){var d=a(b).closest(".ezfc-wrapper");a(b).find(".ezfc-custom-hidden").each(function(){a.each(a(this).find("input, :selected"),function(b,c){a(this).val(a(this).data("index")).removeAttr("disabled")})}),d.find(".ezfc-payment-submit, .ezfc-payment-cancel").prop("disabled",!1),C(b,c)}function v(b){b.find(".ezfc-custom-element").each(function(){var b=a(this).data("element"),c=a(this).find("[data-initvalue]").data("initvalue");switch(b){case"checkbox":a(this).find("input").each(function(){var b=a(this).data("initvalue");1==b?a(this).prop("checked",!0):a(this).removeAttr("checked")});break;case"dropdown":a(this).find("option").removeAttr("selected"),a(this).find("option[data-index='"+c+"']").prop("selected",!0);break;case"radio":a(this).find("input").removeAttr("checked"),a(this).find("input[data-initvalue]").prop("checked",!0);break;default:a(this).find("input").val(c)}}),b.find(".ezfc-selected").removeClass("ezfc-selected"),w(b,0,0),h(b)}function w(b,c,d){var f=parseInt(b.find(".ezfc-step-active").data("step")),g=b.find(".ezfc-step[data-step='"+f+"']"),h=b.data("id");if(f!=c){if(1==d&&1==e[h].verify_steps){var j=b.find(".ezfc-submit-icon");return j.fadeIn(),i(b,c-1),void a(".ezfc-has-hidden-placeholder").val("").removeClass("ezfc-has-hidden-placeholder")}var k=parseInt(e[h].step_indicator_start)-1;return g.fadeOut(200,function(){var d=b.find(".ezfc-step[data-step='"+c+"']");d.fadeIn(200).addClass("ezfc-step-active"),a(this).removeClass("ezfc-step-active"),c>=k?b.find(".ezfc-step-indicator").fadeIn():b.find(".ezfc-step-indicator").hide(),x(d,parseFloat(ezfc_vars.scroll_steps_offset))}),b.find(".ezfc-step-indicator-item").each(function(){var b=parseInt(a(this).data("step"));a(this).removeClass("ezfc-step-indicator-item-active"),c>=b&&a(this).addClass("ezfc-step-indicator-item-active")}),!1}}function x(b,c){var d=a(b).offset();if("undefined"!=typeof d&&0!=ezfc_vars.auto_scroll_steps){var e=c||50;d.top+e;a("html, body").animate({scrollTop:d.top+e})}}function y(b,c,d){b||(b=a("#ezfc_element-"+c));var f=(b.data("decimal_point"),b.data("element")),g=b.find("input").val(),h=B(g),i=h/100,j=g?g.indexOf("%")>=0:0;(!h||isNaN(h))&&(h=0);var k=h;switch(f){case"subtotal":case"numbers":case"hidden":case"extension":case"set":var l=b.find("input"),m=parseFloat(l.data("factor"));m&&!isNaN(m)||0===m||(m=1),k=g,d||(k=h*m);break;case"dropdown":case"radio":case"checkbox":b.find(":selected, :checked").each(function(){d?("object"!=typeof k&&(k=[]),k.push(a(this).data("value"))):k+=parseFloat(a(this).data("value"))});break;case"daterange":var n=[b.find(".ezfc-element-daterange-from").datepicker("getDate"),b.find(".ezfc-element-daterange-to").datepicker("getDate")],m=parseFloat(b.find(".ezfc-element-daterange-from").data("factor"));m&&!isNaN(m)||0===m||(m=1),k=d?n:J(n[0],n[1])*m;break;case"custom_calculation":b.find(".ezfc-element-custom-calculation").data("function");k=b.find(".ezfc-element-custom-calculation-input").val(),d||(k=parseFloat(k));break;case"starrating":k=parseFloat(b.find(":checked").val()),isNaN(k)&&(k=0)}return j&&(k=price*i),d?k:(isNaN(k)&&(k=0),k?parseFloat(k):0)}function z(b){var c=a(b).data("id");1==e[c].clear_selected_values_hidden&&a(b).find(".ezfc-custom-hidden").each(function(){a(this).find("input[type='text']").val(""),a(this).find(":checkbox, :radio").prop("checked",!1)})}function A(a){var b=a.data("element");"input"==b||"numbers"==b||"subtotal"==b?cond_target.find("input").val(""):"dropdown"==b?cond_target.find(":selected").removeAttr("selected"):("radio"==b||"checkbox"==b)&&cond_target.find(":checked").removeAttr("checked")}function B(a,b){var c=ezfc_vars.price_format_dec_point,d=String(a);return c.length<1&&(c="."),b?","==c&&(d=d.replace(",",""),d=d.replace(".",",")):","==c&&(d=d.replace(".",""),d=d.replace(",",".")),d}function C(b,c){var d=a(b).data("id"),f=a(b).find(".ezfc-submit"),g="default",h=e[d].submit_text["default"];if(1==e[d].price_show_request&&c)return r(d,!1),!1;if(1==e[d].summary_enabled&&0==e[d].summary_shown)g="summary",h=e[d].submit_text.summary;else if(1==e[d].use_paypal)g="paypal",h=e[d].submit_text.paypal;else if(1==e[d].payment_force_stripe)g="stripe",h=e[d].submit_text.stripe;else if(1==e[d].use_woocommerce)g="woocommerce",h=e[d].submit_text.woocommerce;else{h=e[d].submit_text["default"];var i=a(b).find(".ezfc-element-wrapper-payment");if(i.length>0){var j=a(i).find(":checked").data("value");"undefined"!=typeof e[d].submit_text[j]&&(g=j,h=e[d].submit_text[j])}}f.val(h),f.data("type",g)}function D(b,c){a(b).keypress(function(a){a.keyCode||a.which;13==a.which&&(i(c,-1),a.preventDefault())})}function E(a,b){var c=window[a];"function"==typeof c&&(b=b||{},c(b))}function F(b,c){var d=a(".ezfc-form[data-id='"+ezfc_payment_form_id+"']"),e=a(".ezfc-payment-form[data-form_id='"+ezfc_payment_form_id+"']");if(c.error)I(c.error.message),a("#ezfc-payment-message-"+ezfc_payment_form_id).text(c.error.message),e.find(".ezfc-payment-submit, .ezfc-payment-cancel").prop("disabled",!1),setTimeout(function(){a("#ezfc-payment-message-"+ezfc_payment_form_id).text("")},7500);else{var f=c.id;d.find("#ezfc-stripetoken-"+ezfc_payment_form_id).val(f),i(d,-1,"stripe-checkout")}}function G(){a(".ezfc-debug-info").remove()}function H(b,c,d){if(2==ezfc_vars.debug_mode){var e=a(c).attr("id");e&&(e=e.split("ezfc_element-")[1]);var f=a(c).data("element");a(c).append("<pre class='ezfc-debug-info ezfc-debug-type-"+b+"'>[["+f+" #"+e+"]]\n["+b+"]\n"+d+"</pre>"),console.log(d,c)}}function I(a){0!=ezfc_vars.debug_mode&&console.log(a)}function J(a,b){return a&&b?(b-a)/1e3/60/60/24:0}if("undefined"==typeof EZFC_LOADED){EZFC_LOADED=!0,ezfc_payment_form_id=0,ezfc_functions={calculate_price:function(b){var c=a(".ezfc-form[data-id='"+b+"']");return o(c)},get_value_from:function(a,b){return y(null,a,b)}};var b=[],c=[];numeral.language("ezfc",{delimiters:{decimal:ezfc_vars.price_format_dec_point,thousands:ezfc_vars.price_format_dec_thousand},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$"}}),numeral.language("ezfc");var d=ezfc_vars.price_format?ezfc_vars.price_format:"0,0[.]00";numeral.defaultFormat(d),a.datepicker.setDefaults(a.datepicker.regional[ezfc_vars.datepicker_language]),a(".ezfc-element-option-image").click(function(){if(a(this).hasClass("ezfc-element-radio-image")){var b=a(this).parents(".ezfc-element-wrapper-radio");b.find(".ezfc-selected").removeClass("ezfc-selected"),b.find(".ezfc-element-radio-input").prop("checked",!1).trigger("change"),a(this).siblings(".ezfc-element-radio-input").prop("checked",!0).trigger("change"),a(this).addClass("ezfc-selected")}else if(a(this).hasClass("ezfc-element-checkbox-image")){var c=a(this).siblings(".ezfc-element-checkbox-input");c.prop("checked")?(c.prop("checked",!1).trigger("change"),a(this).removeClass("ezfc-selected")):(c.prop("checked",!0).trigger("change"),a(this).addClass("ezfc-selected"))}});var e=[];a(".ezfc-form").each(function(){g(this)}),a(".ezfc-element-fileupload").each(function(b,c){var d=a(this).parents(".ezfc-element"),e=a(d).find(".ezfc-upload-button"),f=a(this).parents("form.ezfc-form"),g=f.find("input[name='id']").val(),h=f.find("input[name='ref_id']").val(),i={action:"ezfc_frontend_fileupload",data:"id="+g+"&ref_id="+h};a(this).fileupload({formData:i,dataType:"json",add:function(b,f){a(d).find(".ezfc-bar").css("width",0),a(d).find(".progress").addClass("active"),a(d).find(".ezfc-fileupload-message").text(""),e.click(function(){return""==a(c).val()?!1:(f.submit(),a(e).attr("disabled","disabled"),b.preventDefault(),!1)})},done:function(b,c){return c.result.error?(a(e).removeAttr("disabled"),a(d).find(".ezfc-fileupload-message").text(c.result.error),a(d).find(".ezfc-bar").css("width",0),!1):(a(this).attr("multiple")&&(a(this).val(""),a(e).removeAttr("disabled")),a(d).find(".progress").removeClass("active"),void a(d).find(".ezfc-fileupload-message").text(ezfc_vars.upload_success))},progressall:function(b,c){var e=parseInt(c.loaded/c.total*100,10);a(d).find(".ezfc-bar").css("width",e+"%")},replaceFileInput:!1,url:ezfc_vars.ajaxurl})}),a(".ezfc-overview").dialog({autoOpen:!1,modal:!0}),a(".ezfc-form input, .ezfc-form select").on("change keyup",function(){var b=a(this).parents(".ezfc-form");h(b)}),a(".ezfc-slider").each(function(b,c){var d=a(this),e=a(c).siblings(".ezfc-slider-element"),f=e.slider({min:d.data("min")||0,max:d.data("max")||100,step:d.data("stepsslider")||1,value:d.val()||0,slide:function(a,b){var c=B(b.value,!0);d.val(c),d.trigger("change")}});d.on("change keyup",function(){f.slider("value",d.val())}),d.hasClass("ezfc-pips")&&e.slider("pips",{rest:"label",step:d.data("stepspips")||1}),d.draggable()}),a(".ezfc-spinner").each(function(b,c){var d=a(this);d.spinner({min:d.data("min")||0,max:d.data("max")||100,step:d.data("stepsspinner")||1,change:function(a,b){d.trigger("change")},spin:function(a,b){var c=B(b.value,!0);d.val(c),d.trigger("change")},start:function(a,b){var c=B(d.val());d.val(c)},stop:function(a,b){var c=B(d.val(),!0);d.val(c)}})}),a(".ezfc-step-button").on("click",function(){var b=a(this).parents(".ezfc-form"),c=parseInt(b.find(".ezfc-step-active").data("step")),d=c+(a(this).hasClass("ezfc-step-next")?1:-1),e=a(this).hasClass("ezfc-step-next")?1:0;return w(b,d,e),!1}),a(".ezfc-step-indicator-item-active").on("click",function(){var b=a(this).closest(".ezfc-form"),c=parseInt(a(this).data("step"));return w(b,c,0),!1}),a(".ezfc-element-wrapper-payment input").on("change",function(){var b=a(this).parents(".ezfc-form").data("id");if(1!=e[b].price_show_request&&!e[b].summary_enabled){var c="paypal"==a(this).data("value"),d=c?e[b].submit_text.paypal:e[b].submit_text["default"];a(this).parents(".ezfc-form").find(".ezfc-element-submit").val(d)}}),a(window).scroll(function(){t()}),t(),a(".ezfc-form").submit(function(b){var c=a(this),d=c.data("id"),f=c.find(".ezfc-submit");return 1==e[d].hard_submit?!0:(i(c,-1,f.data("type")),b.preventDefault(),!1)}),a(".ezfc-payment-submit").click(function(b){var c=a(this).closest(".ezfc-payment-form"),d=c.data("form_id"),e=a(".ezfc-form[data-id='"+d+"']");return i(e,-1,a(this).data("payment")),b.preventDefault(),!1}),a(".ezfc-payment-cancel").click(function(){var b=a(this).closest(".ezfc-payment-form"),c=b.data("form_id"),d=a("#ezfc-form-"+c),e=".ezfc-payment-dialog-modal[data-form_id='"+c+"']";return e+=", .ezfc-payment-form",a(e).removeClass("ezfc-payment-dialog-open"),i(d,!1,!1,!0),!1}),a(".ezfc-reset").click(function(){var b=a(this).parents(".ezfc-form");return v(b),!1}),a(".ezfc-collapse-title-wrapper").on("click",function(){var b=a(this).closest(".ezfc-element-wrapper-group").find("> .ezfc-group-elements");b.slideToggle(500);var c="fa-chevron-circle-down",d="fa-chevron-circle-right",e=a(this).find(".ezfc-collapse-icon i");
e.hasClass(c)?e.removeClass(c).addClass(d):e.removeClass(d).addClass(c)}),a(".ezfc-cc-number-formatter").on("change keyup",function(){var b=a(this).val();b=b.replace(/[^\dA-Z]/g,"").replace(/(.{4})/g,"$1 ").trim(),a(this).val(b)})}}),ezfc_functions={};