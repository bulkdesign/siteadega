EZFC={init:function(){if("undefined"==typeof EZFC_LOADED){EZFC_LOADED=!0;var e=this;this.form_vars=[],this.subtotals=[],this.conditional_once=[],this.payment_form_id=0,this.elements_cache=[],this.functions={calculate_element:function(t,a){return e.calculate_element(t,a)},calculate_price:function(t){var a=jQuery(".ezfc-form[data-id='"+t+"']");return e.calculate_price(a)},get_element_id_by_name:function(t,a){return"undefined"==typeof e.elements_cache[t][a]&&(e.elements_cache[t][a]=jQuery("#ezfc-form-"+t+" .ezfc-element[data-elementname='"+a+"']")),!!e.elements_cache[t][a].length&&e.elements_cache[t][a].data("id")},get_value_from:function(t,a){return e.get_value_from_element(null,t,a)},get_value_from_name:function(e,t,a){var r=this.get_element_id_by_name(e,t);return this.get_value_from(r,a)},get_calculated_value_from:function(t,a){return e.get_calculated_element_value(t,a)},price_format:function(t,a,r,i,n){return e.format_price(t,a,r,i,n)}},ezfc_functions=this.functions,this.external_listeners=[],this.price_old_global=[],numeral.language("ezfc",{delimiters:{decimal:ezfc_vars.price_format_dec_point,thousands:ezfc_vars.price_format_dec_thousand},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),numeral.language("ezfc"),this.defaultFormat=ezfc_vars.price_format?ezfc_vars.price_format:"0,0[.]00",numeral.defaultFormat(this.defaultFormat),jQuery.datepicker.setDefaults(jQuery.datepicker.regional[ezfc_vars.datepicker_language]),this.attach_events()}},attach_events:function(){var e=this;jQuery(".ezfc-element-option-image").click(function(){if(jQuery(this).hasClass("ezfc-element-radio-image")){var e=jQuery(this).parents(".ezfc-element-wrapper-radio");e.find(".ezfc-selected").removeClass("ezfc-selected"),e.find(".ezfc-element-radio-input").prop("checked",!1).trigger("change"),jQuery(this).siblings(".ezfc-element-radio-input").prop("checked",!0).trigger("change"),jQuery(this).addClass("ezfc-selected")}else if(jQuery(this).hasClass("ezfc-element-checkbox-image")){var t=jQuery(this).siblings(".ezfc-element-checkbox-input");if(t.attr("disabled"))return!1;t.prop("checked")?(t.prop("checked",!1).trigger("change"),jQuery(this).removeClass("ezfc-selected")):(t.prop("checked",!0).trigger("change"),jQuery(this).addClass("ezfc-selected"))}}),jQuery(".ezfc-form").each(function(){e.init_form(this),jQuery(document).trigger("ezfc_forms_loaded")}),jQuery(".ezfc-element-fileupload").each(function(t,a){var r=jQuery(this).parents(".ezfc-element"),i=jQuery(r).find(".ezfc-upload-button"),n=jQuery(this).parents("form.ezfc-form"),s=n.find("input[name='id']").val(),c=n.find("input[name='ref_id']").val(),o={action:"ezfc_frontend_fileupload",data:"id="+s+"&ref_id="+c};return"function"!=typeof jQuery.prototype.fileupload?(e.debug_message("Unable to load fileupload function."),!1):void jQuery(this).fileupload({formData:o,dataType:"json",add:function(e,t){jQuery(r).find(".ezfc-bar").css("width",0),jQuery(r).find(".progress").addClass("active"),jQuery(r).find(".ezfc-fileupload-message").text(""),i.data("listener")||(i.data("listener",1),i.click(function(){return""!=jQuery(a).val()&&(t.submit(),jQuery(i).attr("disabled","disabled"),e.preventDefault(),!1)}))},done:function(e,t){return jQuery(i).removeAttr("disabled"),t.result.error?(jQuery(r).find(".ezfc-fileupload-message").text(t.result.error),jQuery(r).find(".ezfc-bar").css("width",0),!1):(jQuery(this).attr("multiple")&&(jQuery(this).val(""),jQuery(i).removeAttr("disabled")),jQuery(r).find(".progress").removeClass("active"),void jQuery(r).find(".ezfc-fileupload-message").text(ezfc_vars.upload_success))},progressall:function(e,t){var a=parseInt(t.loaded/t.total*100,10);jQuery(r).find(".ezfc-bar").css("width",a+"%")},replaceFileInput:!1,url:ezfc_vars.ajaxurl})}),jQuery(".ezfc-overview").dialog({autoOpen:!1,modal:!0}),jQuery(".ezfc-form input, .ezfc-form select").on("change keyup",function(){var t=jQuery(this).parents(".ezfc-form");e.form_change(t)}),jQuery(".ezfc-element-numbers").on("change keyup",function(){this.value=this.value.replace(/[^0-9\.,]/g,"")}),jQuery(".ezfc-element-wrapper-checkbox").change(function(){var e=jQuery(this).data("max_selectable");if(e){var t=jQuery(this).find(":checked").length;t>=e?jQuery(this).find("input:not(:checked)").attr("disabled","disabled"):jQuery(this).find("input:not(:checked)").removeAttr("disabled")}}),jQuery(".ezfc-slider").each(function(t,a){var r=jQuery(this),i=jQuery(a).siblings(".ezfc-slider-element"),n=i.slider({min:r.data("min")||0,max:r.data("max")||100,step:r.data("stepsslider")||1,value:r.val()||0,slide:function(t,a){var i=e.normalize_value(a.value,!0);r.val(i),r.trigger("change")}});r.on("change keyup",function(){n.slider("value",r.val())}),r.hasClass("ezfc-pips")&&(i.slider("pips",{rest:"label",step:r.data("stepspips")||1}),i.find(".ui-slider-pip").on("click",function(){var e=jQuery(this).find(".ui-slider-label").data("value");r.val(e),r.trigger("change")})),r.draggable()}),jQuery(".ezfc-spinner").each(function(t,a){var r=jQuery(this);r.spinner({min:r.data("min")||0,max:r.data("max")||100,step:r.data("stepsspinner")||1,change:function(e,t){r.trigger("change")},spin:function(t,a){var i=e.normalize_value(a.value,!0);r.val(i),r.trigger("change")},start:function(t,a){var i=e.normalize_value(r.val());r.val(i)},stop:function(t,a){var i=e.normalize_value(r.val(),!0);r.val(i)}})}),jQuery(".ezfc-step-button").on("click",function(){var t=jQuery(this).parents(".ezfc-form"),a=parseInt(t.find(".ezfc-step-active").data("step")),r=a+(jQuery(this).hasClass("ezfc-step-next")?1:-1),i=jQuery(this).hasClass("ezfc-step-next")?1:0;return e.set_step(t,r,i),!1}),jQuery(".ezfc-step-indicator-item-active").on("click",function(){var t=jQuery(this).closest(".ezfc-form"),a=parseInt(jQuery(this).data("step"));return e.set_step(t,a,0),!1}),jQuery(".ezfc-element-wrapper-payment input").on("change",function(){var t=jQuery(this).parents(".ezfc-form").data("id");if(1!=e.form_vars[t].price_show_request&&!e.form_vars[t].summary_enabled){var a="paypal"==jQuery(this).data("value");a?e.form_vars[t].submit_text.paypal:e.form_vars[t].submit_text.default}}),jQuery(window).scroll(this.scroll),this.scroll(),jQuery(".ezfc-form").submit(function(t){var a=jQuery(this),r=a.data("id"),i=a.find(".ezfc-submit");return 1==e.form_vars[r].hard_submit||(e.form_submit(a,-1,i.data("type")),t.preventDefault(),!1)}),jQuery(".ezfc-payment-submit").click(function(t){var a=jQuery(this).closest(".ezfc-payment-form"),r=a.data("form_id"),i=jQuery(".ezfc-form[data-id='"+r+"']");return e.form_submit(i,-1,jQuery(this).data("payment")),t.preventDefault(),!1}),jQuery(".ezfc-payment-cancel").click(function(){var t=jQuery(this).closest(".ezfc-payment-form"),a=t.data("form_id"),r=jQuery("#ezfc-form-"+a),i=".ezfc-payment-dialog-modal[data-form_id='"+a+"']";return i+=", .ezfc-payment-form",jQuery(i).removeClass("ezfc-payment-dialog-open"),e.form_submit(r,!1,!1,!0),!1}),jQuery(".ezfc-reset").click(function(){var t=jQuery(this).parents(".ezfc-form");return e.reset_form(t),!1}),jQuery(".ezfc-collapse-title-wrapper").on("click",function(){var t=jQuery(this).closest(".ezfc-element-wrapper-group");e.toggle_group(t)}),jQuery(".ezfc-cc-number-formatter").on("change keyup",function(){var e=jQuery(this).val();e=e.replace(/[^\dA-Z]/g,"").replace(/(.{4})/g,"$1 ").trim(),jQuery(this).val(e)})},init_form:function(e){var t=this,a=jQuery(e),r=a.data("id");this.form_vars[r]=a.data("vars"),"object"!=typeof this.form_vars[r]&&(this.form_vars[r]=jQuery.parseJSON(a.data("vars"))),this.subtotals[r]=[],this.conditional_once[r]=[],this.external_listeners[r]=[],this.elements_cache[r]=[],1==this.form_vars[r].price_show_request&&this.price_request_toggle(r,!1),a.find(".ezfc-element-datepicker").each(function(){var e=jQuery(this),a={};e.data("settings")&&(a=e.data("settings"));var i=[0,1,2,3,4,5,6];a.available_days.length&&(i=a.available_days.split(",")),i=i.map(function(e){return parseInt(e)}),e.datepicker({dateFormat:t.form_vars[r].datepicker_format,minDate:a.minDate?a.minDate:"",maxDate:a.maxDate?a.maxDate:"",numberOfMonths:a.numberOfMonths?parseInt(a.numberOfMonths):1,showAnim:a.showAnim?a.showAnim:"fadeIn",showWeek:"1"==a.showWeek&&a.showWeek,firstDay:!!a.firstDay&&a.firstDay,beforeShowDay:function(e){var t=e.getDay();return[jQuery.inArray(t,i),""]}})}),a.find(".ezfc-element-timepicker").each(function(){var e=jQuery(this),a={};e.data("settings")&&(a=e.data("settings")),e.timepicker({minTime:a.minTime?a.minTime:null,maxTime:a.maxTime?a.maxTime:null,step:a.steps?a.steps:30,timeFormat:a.format?a.format:t.form_vars[r].timepicker_format})}),a.find(".ezfc-element-daterange").each(function(){var e=jQuery(this),a=t.form_vars[r].datepicker_format;e.hasClass("ezfc-element-daterange-from")?e.datepicker({dateFormat:a,minDate:e.data("mindate"),maxDate:e.data("maxdate"),onSelect:function(t){var r=e.data("mindays")||0,i=e.data("maxdays")||0,n=jQuery.datepicker.parseDate(a,t);n.setDate(n.getDate()+r);var s=jQuery.datepicker.parseDate(a,t);s.setDate(s.getDate()+i),e.siblings(".ezfc-element-daterange-to").datepicker("option","minDate",n),0!=i&&e.siblings(".ezfc-element-daterange-to").datepicker("option","maxDate",s),e.trigger("change")}}):e.datepicker({dateFormat:t.form_vars[r].datepicker_format,minDate:e.data("mindate"),maxDate:e.data("maxdate"),onSelect:function(t){e.trigger("change")}})}),a.find(".ezfc-element-colorpicker").each(function(){var e=jQuery(this),t=e.parents(".ezfc-element").find(".ezfc-element-colorpicker-input"),r=e.colorpicker({container:e}).on("changeColor.colorpicker",function(a){e.css("background-color",a.color.toHex()),t.val(a.color.toHex())});jQuery(t).on("click focus",function(){r.colorpicker("show")}).on("change",function(){r.colorpicker("setValue",a.val())})});var i=a.find(".ezfc-step");if(i.length>0){var n=i.last();a.find(".ezfc-summary-wrapper").appendTo(n),a.find(".ezfc-submit-wrapper").appendTo(n).addClass("ezfc-submit-step"),this.prevent_enter_step_listener(n.find("input"),a)}if(jQuery(".ezfc-custom-element[data-group]").each(function(){var e=jQuery(this),t=e.data("group"),a=jQuery("#ezfc_element-"+t);if("group"==a.data("element")&&a.length>0){var r=a.find("> .ezfc-group-elements");e.appendTo(r)}}),this.set_price(a),this.set_submit_text(a),this.form_vars[r].use_woocommerce){var s=".woocommerce form.cart, .woocommerce .price";jQuery(s).hide()}var c=parseInt(this.form_vars[r].step_indicator_start)+1;c>1&&a.find(".ezfc-step-indicator").hide(),"2"==ezfc_vars.debug_mode&&(a.append("<button id='ezfc-show-all-elements'>Show/hide elements</button>"),jQuery("#ezfc-show-all-elements").click(function(){return a.hasClass("ezfc-debug-visible")?(a.removeClass("ezfc-debug-visible"),a.find(".ezfc-tmp-visible").removeClass("ezfc-tmp-visible").hide()):(a.addClass("ezfc-debug-visible"),a.find(".ezfc-hidden").addClass("ezfc-tmp-visible").show().css("display","inline-block")),!1})),this.form_vars[r].use_stripe&&"undefined"!=typeof Stripe&&Stripe.setPublishableKey(ezfc_vars.stripe.publishable_key),this.prevent_enter_step_listener(":input:not(textarea):not([type=submit])",a),this.populate_html_placeholders(a),jQuery(document).trigger("ezfc_form_init",r)},form_change:function(e){var t=jQuery(e).data("id");return this.clear_hidden_values(e),this.populate_html_placeholders(e),this.form_vars[t].price_requested=0,this.form_vars[t].summary_shown=0,jQuery(e).find(".ezfc-summary-wrapper").fadeOut(),1==this.form_vars[t].price_show_request?(this.price_request_toggle(t,!1),!1):(this.set_price(e),void this.set_submit_text(e))},form_submit:function(e,t,a,r){var i=this,n=jQuery(e),s=n.closest(".ezfc-wrapper"),c=n.data("id");n.find(".ezfc-submit-icon").addClass("ezfc-submit-icon-show");var o=n.find(".ezfc-submit-icon"),l=n.find("input[type='submit']");if(1==this.form_vars[c].price_show_request&&this.set_price(e),r)return o.fadeOut(),l.prop("disabled",!1),s.find(".ezfc-payment-submit, .ezfc-payment-cancel").prop("disabled",!1),this.form_vars[c].stripe_cc_info_shown=0,!1;if("stripe"==a){var d=jQuery("#ezfc-stripe-form-"+c),u=this.format_price(c,this.price_old_global[c],!1,!1,!0);if(d.find(".ezfc-payment-price").text(u),this.form_vars[c].stripe_cc_info_shown){var d=jQuery("#ezfc-stripe-form-"+c);this.payment_form_id=c,Stripe.card.createToken(d,this.stripe_response_handler),d.find(".ezfc-payment-submit, .ezfc-payment-cancel").prop("disabled",!0)}else this.form_vars[c].stripe_cc_info_shown=1,jQuery("#ezfc-stripe-form-"+c+", #ezfc-stripe-form-modal-"+c).addClass("ezfc-payment-dialog-open");return o.fadeOut(),!1}o.fadeIn(),l.prop("disabled",!0),n.find(".ezfc-custom-hidden:not(.ezfc-element-wrapper-fileupload):not(.ezfc-element-wrapper-group)").each(function(){var e=jQuery(this).find(".ezfc-element-radio:not(:has(:radio:checked))");e.length&&jQuery(e).first().find("input").prop("checked",!0),jQuery(this).find("input, :selected").val("__HIDDEN__").removeAttr("disabled").addClass("ezfc-has-hidden-placeholder")}),n.find(".ezfc-element[data-calculate_activated='0']").each(function(){jQuery(this).find("input, :selected").val("__HIDDEN__")});var f=n.serialize();f+="&url="+encodeURI(window.location.href),0==this.form_vars[c].price_requested&&(f+="&price_requested=1"),0==this.form_vars[c].summary_shown&&(f+="&summary=1"),t!=-1&&(f+="&step="+t),this.form_vars[c].preview_form&&(f+="&preview_form="+this.form_vars[c].preview_form),f+="&generated_price="+this.price_old_global[c],this.call_hook("ezfc_before_submission",{data:f,form:n,form_vars:this.form_vars[c],id:c}),jQuery.ajax({type:"post",url:ezfc_vars.ajaxurl,data:{action:"ezfc_frontend",data:f},success:function(a){jQuery(".ezfc-submit-icon").removeClass("ezfc-submit-icon-show"),l.removeAttr("disabled"),o.fadeOut(),i.debug_message(a);try{a=jQuery.parseJSON(a)}catch(e){a=!1,i.debug_message(e)}if(!a)return n.find(".ezfc-message").text("Something went wrong. :("),i.recaptcha_reload(),i.reset_disabled_fields(e,!0),!1;if(a.error){if(i.reset_disabled_fields(e,!0),a.id){var r=!0,d="#ezfc_element-"+a.id,u=jQuery(d).find(".ezfc-element").first(),f=null,_=n.find(".ezfc-step-active").length>0;if(_){var p=parseInt(jQuery(d).parents(".ezfc-step").data("step"));p!=t&&t!=-1&&(r=!1,i.set_step(e,t+1))}if(r){u.length||(u=jQuery(d));var m=_?1e3:400;if(u.is(":visible"))i.show_tip(u,d,m,a.error);else{var h=u.parents(".ezfc-element-wrapper-group");h.length?(h.each(function(e,t){i.toggle_group(jQuery(t))}),i.show_tip(u,d,m,a.error)):i.set_message(c,a.error+" (#"+a.id+")")}if("undefined"!=typeof ezfc_vars.required_text_auto_hide){var v=1e3*parseFloat(ezfc_vars.required_text_auto_hide);v>0&&setTimeout(function(){f&&f.hide()},v)}i.form_vars[c].disable_error_scroll||i.scroll_to(d)}}else i.set_message(c,a.error);return i.recaptcha_reload(),!1}if(a.step_valid)return i.reset_disabled_fields(e),i.set_step(e,t+1),!1;if(a.summary)return n.find(".ezfc-summary-wrapper").fadeIn().find(".ezfc-summary").html(a.summary),i.form_vars[c].summary_shown=1,i.reset_disabled_fields(e),!1;if(i.recaptcha_reload(),a.paypal)l.attr("disabled","disabled"),window.location.href=a.paypal;else{if(a.price_requested||0===a.price_requested)return i.price_request_toggle(c,!0,a.price_requested),!1;var y={form:n,form_vars:i.form_vars[c],id:c,price:price,response:a};i.call_hook("ezfc_submission_success",y),i.form_vars[c].submission_js_func&&"function"==typeof window[i.form_vars[c].submission_js_func]&&window[i.form_vars[c].submission_js_func](y),s.find(".ezfc-payment-dialog, .ezfc-payment-dialog-modal").removeClass("ezfc-payment-dialog-open");var g=jQuery(".ezfc-success-text[data-id='"+c+"']");if(g.html(a.success),1==i.form_vars[c].reset_after_submission)return i.reset_form(e),void g.fadeIn().delay(7500).fadeOut();if(1==i.form_vars[c].hide_all_forms?jQuery(".ezfc-form, .ezfc-required-notification").fadeOut():(n.find(".ezfc-required-notification").fadeOut(),1==i.form_vars[c].show_success_text&&n.fadeOut()),1==i.form_vars[c].show_success_text&&(1==i.form_vars[c].scroll_to_success_message?g.fadeIn(400,function(){i.scroll_to(g,-200)}):g.fadeIn()),a.woo_update_cart&&a.woo_cart_html&&ezfc_vars.woocommerce_update_cart_selector.length>0&&jQuery(ezfc_vars.woocommerce_update_cart_selector).html(a.woo_cart_html),"undefined"!=typeof i.form_vars[c].redirect_url&&i.form_vars[c].redirect_url.length>0){var b="";1==i.form_vars[c].redirect_forward_values&&(b=n.serialize(),b+="&total="+i.price_old_global[c],b+="&total_f="+i.functions.price_format(c,i.price_old_global[c]));var z=i.form_vars[c].redirect_url.indexOf("?")==-1?"?":"&";window.location.href=i.form_vars[c].redirect_url+z+b}else if("undefined"!=typeof i.form_vars[c].refresh_page_after_submission&&1==i.form_vars[c].refresh_page_after_submission){var j=Math.max(0,Math.abs(parseInt(i.form_vars[c].redirect_timer)));setTimeout(function(){window.location.reload()},1e3*j)}}}})},calculate_get_external_values:function(e,t,a,r){var i=this,n=a.data("value_external"),s=a.data("value_external_listen");if((!this.external_listeners[t][n]||s)&&n&&jQuery(n).length>0){var c;c=jQuery(n).is("input[type='radio']")?jQuery(n).find(":checked").val():jQuery(n).is("input, input[type='text'], textarea")?jQuery(n).val():jQuery(n).is("select")?jQuery(n).find(":selected").text():jQuery(n).text(),"input"==r||"numbers"==r||"subtotal"==r?a.find("input").val(c):"dropdown"==r?(a.find(":selected").removeAttr("selected"),a.find("option[value='"+c+"']").attr("selected","selected")):"radio"==r?(a.find(":checked").removeAttr("checked"),a.find("input[value='"+c+"']").attr("checked","checked")):"checkbox"==r?(a.find(":checked").removeAttr("checked"),a.find("input[value='"+c+"']").attr("checked","checked")):"textfield"==r&&a.find("textarea").val(c),this.external_listeners[t][n]||(this.external_listeners[t][n]=1,jQuery(n).on("change keyup",function(){i.set_price(jQuery(e))}))}},calculate_conditionals:function(e,t,a,r){var i=this,n=a.data("conditional_action"),s=a.data("conditional_operator"),c=a.data("conditional_target"),o=a.data("conditional_values"),l=a.data("conditional_target_value"),d=a.data("conditional_notoggle"),u=a.data("conditional_redirects"),f=a.data("conditional_use_factor"),_=a.data("conditional_row_operator");if(n&&0!=n){var p=n.toString().split(","),m=s.toString().split(","),h=c.toString().split(","),v=o.toString().split(","),y=l.toString().split(","),g=d.toString().split(","),b=u.toString().split(","),z=f.toString().split(","),j=_.toString().split(","),Q=a.data("is_number"),k=this.get_value_from_element(a,null,!Q),w=1,x=a.data("id");jQuery.each(p,function(n,s){var c;if(c="submit_button"==h[n]?jQuery(e).find(".ezfc-submit"):"price"==h[n]?jQuery(e).find(".ezfc-price-wrapper-element"):jQuery("#ezfc_element-"+h[n]),!(c.length<1&&b.length<1)){1==z[n]&&(w=parseFloat(w),isNaN(w)||(k*=w));var o=[{operator:m[n],value:v[n],compare_target:""}],l=a.data("conditional_chain_length");if(l>0){var d=a.data("conditional_operator_chain_"+n),u=a.data("conditional_value_chain_"+n),f=a.data("conditional_compare_target_chain_"+n);if(d){var _=d.toString().split(","),p=u.toString().split(","),C=f.toString().split(",");jQuery.each(_,function(e,t){o.push({operator:t,value:p[e],compare_target:C[e]})})}}var N=!1;jQuery.each(o,function(e,s){var o=s.value,l=k;0!=s.compare_target&&(l=i.get_value_from_element(!1,s.compare_target));var d=["in","not_in","selected","not_selected"];if(o=1!=Q||jQuery.inArray(s.operator,d)?s.value:parseFloat(s.value),"input"==r)N=o.toLowerCase()==c.val().toLowerCase();else{var u=s.value.split(":");switch(u.length>1&&(u[0]=parseFloat(u[0]),u[1]=parseFloat(u[1])),s.operator){case"gr":N=l>o;break;case"gre":N=l>=o;break;case"less":N=l<o;break;case"lesse":N=l<=o;break;case"equals":N=l==o;break;case"between":N=!(u.length<2)&&(l>=u[0]&&l<=u[1]);break;case"not_between":N=!(u.length<2)&&(l<u[0]||l>u[1]);break;case"not":N=u.length<2?l!=o:l<u[0]&&l>u[1];break;case"hidden":N=!a.is(":visible");break;case"visible":N=a.is(":visible");break;case"mod0":N=l>0&&l%o==0;break;case"mod1":N=l>0&&l%o!=0;break;case"bit_and":N=l&o;break;case"bit_or":N=l|o;break;case"empty":"undefined"==typeof l&&(N=!0),N="number"==typeof l?isNaN(l):l.length<1;break;case"notempty":N="undefined"!=typeof l&&("number"==typeof l?!isNaN(l):l.length>0);break;case"in":if("undefined"==typeof l)N=!1;else{var f=o.split("|");N=!1;for(var _ in f)if(l==f[_])return void(N=!0)}break;case"not_in":if("undefined"==typeof l)N=!1;else{var f=o.split("|");N=!0;for(var _ in f)if(l==f[_])return void(N=!1)}break;case"once":N=!0,"undefined"==typeof i.conditional_once[t][x]&&(i.conditional_once[t][x]=[]),"undefined"==typeof i.conditional_once[t][x][n]&&(i.conditional_once[t][x][n]=[]),"undefined"==typeof i.conditional_once[t][x][n][e]?i.conditional_once[t][x][n][e]=1:N=!1;break;case"selected":if(N=!1,m=i.get_value_from_element(a,null,!0,!1,{return_array:!0,return_value:"value"}),"object"==typeof m){var f=o.split("|");for(var _ in f){cmp_value=f[_];for(var p in m)if(m[p]==cmp_value)return void(N=!0)}}break;case"not_selected":N=!0;var m=i.get_value_from_element(a,null,!0,!1,{return_array:!0,return_value:"value"});if("object"==typeof m){var f=o.split("|");for(var _ in f){cmp_value=f[_];for(var p in m)if(m[p]==cmp_value)return void(N=!1)}}break;default:N=!1}}if("undefined"!=typeof j[n]&&1==j[n]){if(N)return!1}else if(!N)return!1});var F,D,I=g[n],q=c.data("element");if("group"==q&&c.push(jQuery(c).find("> .ezfc-custom-element")),"set"==s&&N)"__self__"==y[n]&&(y[n]=k),"input"==q||"hidden"==q||"numbers"==q||"subtotal"==q||"set"==q?c.find("input").val(y[n]):"dropdown"==q?(c.find(":selected").removeAttr("selected"),c.find("option[data-value='"+y[n]+"']").prop("selected","selected")):"radio"==q?(c.find(":checked").removeAttr("checked"),c.find("input[data-value='"+y[n]+"']").prop("checked",!0)):"checkbox"==q?c.find("input[data-value='"+y[n]+"']").prop("checked",!0):c.text(y[n]);else if("activate"==s){if(N)if("submit"==q)c.prop("disabled",!1);else if("group"==q){var S=c.find("[data-calculate_enabled]");S.data("calculate_enabled",1),S.attr("data-calculate_activated",1)}else c.data("calculate_enabled",1),c.attr("data-calculate_activated",1);else if(1!=I)if("submit"==q)c.prop("disabled",!0);else if("group"==q){var S=c.find("[data-calculate_enabled]");S.data("calculate_enabled",0),S.attr("data-calculate_activated",0)}else c.data("calculate_enabled",0),c.attr("data-calculate_activated",0)}else if("deactivate"==s){if(N){if("submit"==q)c.prop("disabled",!0);else if("group"==q){var S=c.find("[data-calculate_enabled]");S.data("calculate_enabled",0),S.attr("data-calculate_activated",0)}else c.data("calculate_enabled",0);c.attr("data-calculate_activated",0)}else if(1!=I)if("submit"==q)c.prop("disabled",!1);else if("group"==q){var S=c.find("[data-calculate_enabled]");S.data("calculate_enabled",1),S.attr("data-calculate_activated",1)}else c.data("calculate_enabled",1),c.attr("data-calculate_activated",1)}else if("redirect"==s&&N){var O=jQuery(e).parents(".ezfc-wrapper").find(".ezfc-message");O.text(i.form_vars[t].redirect_text).fadeIn(),jQuery(e).fadeOut(),setTimeout(function(){window.location.href=b[n]},1e3*i.form_vars[t].redirect_timer)}else if("step_goto"!=s&&"step_prev"!=s&&"step_next"!=s||!N){if("show"==s)F="removeClass",D="addClass";else{if("hide"!=s)return;F="addClass",D="removeClass"}N?(c[F]("ezfc-hidden ezfc-custom-hidden"),"show"==s?c.addClass("ezfc-fade-in"):c.is(":visible")&&c.fadeOut(500,function(){c.removeClass("ezfc-fade-in"),1==i.form_vars[t].clear_selected_values_hidden&&i.clear_hidden_values_element()})):1!=I&&(c[D]("ezfc-hidden ezfc-custom-hidden"),"show"==s?c.removeClass("ezfc-fade-in"):c.addClass("ezfc-fade-in"))}else{var A=parseInt(jQuery(e).find(".ezfc-step-active").data("step")),T=0;switch(s){case"step_prev":if(0==A)return;T=A-1;break;case"step_next":var E=jQuery(e).find(".ezfc-step-start").length;if(A==E-1)return;T=A+1;break;case"step_goto":var M=jQuery(e).find(".ezfc-step-start[data-id='"+h[n]+"']");if(M.length<1)return;T=parseInt(M.data("step"))}i.set_step(jQuery(e),T,0)}}})}},calculate_element:function(e,t,a){var r=this,i=jQuery("#ezfc-form-"+e),n=jQuery("#ezfc_element-"+t);if(!i||!n)return void console.log("Unable to find form #"+e+" or element #"+t);var s=n.data("calculate_rows"),c=n.data("calculate_enabled"),o=n.data("add_to_price"),l=n.data("element"),d=n.closest(".ezfc-step").length>0,u=n.data("overwrite_price"),f=0;"subtotal"!=l&&"custom_calculation"!=l&&"extension"!=l||(f=a),"custom_calculation"==l&&(s=[]);var _=n.find(".ezfc-element-numbers, .ezfc-element-input-hidden, .ezfc-element-subtotal, .ezfc-element-daterange-container, .ezfc-element-set, .ezfc-element-extension, :selected, :checked, .ezfc-element-custom-calculation"),p=["ceil","floor","round","abs","subtotal"];return jQuery(_).each(function(t,i){if("undefined"!=typeof s){var _={};jQuery(this).data("settings")&&(_=jQuery(this).data("settings"));var m=n.is(":visible");if(d&&!n.closest(".ezfc-step-active").length&&(m=!n.hasClass("ezfc-custom-hidden")),!(m||_.hasOwnProperty("calculate_when_hidden")&&0!=_.calculate_when_hidden||"hidden"==l))return void r.add_debug_info("calculate",n,"Skipped as element is hidden and calculate_when_hidden is not enabled.");if(!(c&&0!=c||s.targets||s.values||"set"==l||"subtotal"==l||"hidden"==l||"extension"==l||"custom_calculation"==l))return void r.add_debug_info("calculate",n,"No target or values were found to calculate with. Subtotal, Hidden and Set elements are skipped.");if((!c||0==c)&&"custom_calculation"!=l)return void r.add_debug_info("calculate",n,"Calculation is disabled.");var h=parseFloat(jQuery(i).data("factor")),v=jQuery(i).val(),y=r.get_value_from_element(n,null,!1),g=y/100,b=v.indexOf("%")>=0;y&&!isNaN(y)||(y=0),h&&!isNaN(h)||0===h||(h=1);var z=y;switch(l){case"numbers":case"extension":z=y;break;case"hidden":if(jQuery(i).data("use_woocommerce_price")){var j=parseFloat(jQuery("meta[itemprop='price']").attr("content"));isNaN(j)&&(j=0),z=j,jQuery(i).val(j)}else z=y;break;case"dropdown":case"radio":case"checkbox":z=parseFloat(jQuery(i).data("value")),isNaN(z)&&(z=0);break;case"subtotal":z=a;break;case"daterange":var Q=[jQuery(i).find(".ezfc-element-daterange-from").datepicker("getDate"),jQuery(i).find(".ezfc-element-daterange-to").datepicker("getDate")];z=r.jqueryui_date_diff(Q[0],Q[1],jQuery(i).data("workdays_only"))*h;break;case"custom_calculation":var k=jQuery(n).find(".ezfc-element-custom-calculation").data("function");if(z=window[k](f),c&&(z=parseFloat(z)),jQuery(n).find(".ezfc-element-custom-calculation-input").val(z),2==ezfc_vars.debug_mode){var w=jQuery(n).find(".ezfc-element-custom-calculation script").text();r.add_debug_info("custom_calculation",n,"custom_calculation:\n"+w)}}if(b&&(z=f*g),"undefined"!=typeof s[0]){for(var x in s)if("__open__"==s[x].target&&"undefined"==typeof s[x].reference_index){s[x].prio=parseInt(s[x].prio),isNaN(s[x].prio)&&(s[x].prio=0);for(var C in s)x!=C&&(s[C].prio=parseInt(s[C].prio),isNaN(s[C].prio)&&(s[C].prio=0),"__close__"==s[C].target&&s[x].prio==s[C].prio&&"undefined"==typeof s[x].reference_index&&"undefined"==typeof s[C].reference_index&&(s[C].operator=s[x].operator,s[C].reference_index=x,s[x].reference_index=C))}jQuery.each(s,function(t,c){if(!c.operator&&"__close__"!=c.target)return void r.add_debug_info("calculate",n,"#"+t+": No operator found here.");if("__open__"==c.target)return c.value=z,void(z=0);var o=[];if(jQuery.inArray(c.operator,p)==-1&&"__open__"!=c.target&&"__close__"!=c.target&&(o=jQuery("#ezfc_element-"+c.target),el_settings_target=o.find("input").data("settings"),o.hasClass("ezfc-custom-hidden")&&el_settings_target&&el_settings_target.hasOwnProperty("calculate_when_hidden")&&0==el_settings_target.calculate_when_hidden))return void r.add_debug_info("calculate",n,"#"+t+": Skipping this element as it is conditionally hidden.");var l,d=c.value,f=0;if("__close__"==c.target){if("undefined"==typeof s[c.reference_index])return;l=z,z=s[c.reference_index].value}else o.length>0?(f=o.data("id"),"undefined"==typeof c.use_calculated_target_value&&(c.use_calculated_target_value=0),0==c.use_calculated_target_value?l=r.get_value_from_element(o,null,!1):1==c.use_calculated_target_value?l=r.get_target_subtotal_value(e,f)+r.get_calculated_element_value(e,f):2==c.use_calculated_target_value?l=r.get_calculated_element_value(e,f):3==c.use_calculated_target_value&&(l=r.get_value_from_element(o,null,!1,!0))):0!=d&&(l=parseFloat(d));switch(l&&!isNaN(l)||(l=0),c.operator){case"add":z+=l;break;case"subtract":z-=l;break;case"multiply":z*=l;break;case"divide":if(0==l)return void r.add_debug_info("calculate",n,"#"+t+": Division by 0.");z/=l,"1"==jQuery(i).data("calculate_before")&&(u=1,z=l/y);break;case"equals":z=l;break;case"power":z=Math.pow(z,l);break;case"ceil":z=Math.ceil(z);break;case"floor":z=Math.floor(z);break;case"round":z=Math.round(z);break;case"abs":z=Math.abs(z);break;case"subtotal":z=a;break;case"log":if(0==l)return;z=Math.log(l);break;case"log2":if(0==l)return;z=Math.log2(l);break;case"log10":if(0==l)return;z=Math.log10(l)}r.add_debug_info("calculate",n,"#"+t+": operator = "+c.operator+"\ntarget_value = "+l+"\ntarget_element = #"+f+"\ncalc_value = "+d+"\naddPrice = "+z)})}1==o?f+=z:2==o&&(f=z),1==u&&(f=z),r.add_debug_info("calculate",n,"\nprice = "+f+"\naddPrice = "+z+"\nfactor = "+h)}}),f},calculate_element_loop:function(e,t,a,r){var i=t.data("calculate_enabled"),n=t.data("overwrite_price"),s=t.data("add_to_price"),c=this.calculate_element(e,t.data("id"),r);if(s>=1?1==n?r=c:1==i&&(r+=c):1==n&&(o=c),"subtotal"==a||"set"==a||"custom_calculation"==a){var o;o=1==s?1==n?r:c:2==s?c:c;var l=2,d=t.find("input").data("settings");d&&(l=d.precision);var u=this.normalize_value(o.toFixed(l),!0);t.find("input").val(u)}return r},calculate_discounts:function(e,t,a,r,i){var n=this,s=a.data("discount_range_min"),c=a.data("discount_range_max"),o=a.data("discount_operator"),l=a.data("discount_values"),d=a.data("overwrite_price");if(l||0==l){var u=s.toString().split(","),f=c.toString().split(","),_=o.toString().split(","),p=l.toString().split(","),m=0,h=1;if("input"==r||"numbers"==r||"subtotal"==r||"hidden"==r||"extension"==r){var v=a.find("input");h=parseFloat(v.data("factor")),h&&!isNaN(h)||0===h||(h=1),m=this.normalize_value(v.val())}else if("dropdown"==r)m=parseFloat(a.find(":selected").data("value"));else if("radio"==r)m=parseFloat(a.find(":checked").data("value"));else if("checkbox"==r)m=0,a.find(":checked").each(function(e,t){m+=parseFloat(jQuery(t).data("value"))});else if("daterange"==r){var y=[a.find(".ezfc-element-daterange-from").datepicker("getDate"),a.find(".ezfc-element-daterange-to").datepicker("getDate")];m=n.jqueryui_date_diff(y[0],y[1],a.data("workdays_only"))}jQuery.each(_,function(e,t){if(!(p[e].length<1)){u[e]||0===u[e]||(u[e]=Number.NEGATIVE_INFINITY),f[e]||0===f[e]||(f[e]=Number.POSITIVE_INFINITY);var s;if(m>=parseFloat(u[e])&&m<=parseFloat(f[e])){var c,o=parseFloat(p[e]);switch(t){case"add":c=o,s=i+c,d?i=s:i+=s;break;case"subtract":c=o,s=i-c,d?i=s:i-=s;break;case"percent_add":c=m*h*(o/100),s=i+c,i=s;break;case"percent_sub":c=m*h*(o/100),s=i-c,i=s;break;case"equals":c=o,s=c,i=s;break;case"factor":c=m*o,s=c,i=s,a.find("[data-factor]").attr("data-factor",o)}"subtotal"!=r||isNaN(s)||(s=n.normalize_value(s,!0),jQuery(a).find("input").val(s)),n.add_debug_info("discount",a,"discount = "+c+"\nprice after discount = "+i)}}})}return i},calculate_set_elements:function(e,t,a,r,i){var n=this,s=a.data("set_operator"),c=a.data("set_elements"),o=1==a.data("set_allow_zero");if(c){var l,d=c.toString().split(",");jQuery.each(d,function(e,t){var a=jQuery("#ezfc_element-"+t);if(a){var r=n.get_value_from_element(a,null,!1);if(o||0!=r){if(0==e)return void(l=r);switch(s){case"min":r<l&&(l=r);break;case"max":r>l&&(l=r);break;case"avg":case"sum":l+=r;break;case"dif":l-=r;break;case"prod":l*=r;break;case"quot":0!=r&&(l/=r)}}}}),"avg"==s&&(l/=d.length),l=this.normalize_value(l,!0),a.find("input").val(l)}},calculate_price:function(e){var t=this,a=jQuery(e).data("id"),r=0;
return this.subtotals[a]=[],this.remove_debug_info(),jQuery(e).find(".ezfc-custom-element").each(function(a,i){var n=jQuery(e).data("id"),s=jQuery(i),c=s.data("id"),o=s.data("element"),l={};s.find("input").data("settings")&&(l=s.find("input").data("settings")),t.calculate_get_external_values(e,n,s,o),t.calculate_conditionals(e,n,s,o);var d=0;if("undefined"!=typeof l.calculate_when_hidden&&(d=parseInt(l.calculate_when_hidden)),!s.hasClass("ezfc-hidden")||d){t.calculate_set_elements(e,n,s,o);var u=t.calculate_element_loop(n,s,o,r);r=u,r=t.calculate_discounts(e,n,s,o,r),t.subtotals[n].push({el_id:c,price:r}),t.calculate_conditionals(e,n,s,o)}}),r},set_price:function(e,t,a){var r=this,i=jQuery(e).data("id");return a?price=a:t&&0===t||(price=this.calculate_price(jQuery(e))),this.set_subtotal_values(jQuery(e)),1==this.form_vars[i].price_show_request&&0==this.form_vars[i].price_requested?void this.price_request_toggle(i,!1):("undefined"==typeof this.price_old_global[i]&&(this.price_old_global[i]=0),void(this.price_old_global[i]!=price&&(0!=this.form_vars[i].counter_duration?jQuery(e).find(".ezfc-price-value").countTo({from:r.price_old_global[i],to:price,speed:this.form_vars[i].counter_duration,refreshInterval:this.form_vars[i].counter_interval,formatter:function(e,t){return r.format_price(i,e)}}):jQuery(e).find(".ezfc-price-value").text(this.format_price(i,price)),this.price_old_global[i]=price)))},format_price:function(e,t,a,r,i){var n=this.defaultFormat,s=a||this.form_vars[e].currency;this.form_vars[e].price_format&&this.form_vars[e].price_format.length>0&&(n=this.form_vars[e].price_format),r&&r.length>0&&(n=r),isNaN(t)&&(t=0);var c=0;return isFinite(t)&&(c=numeral(t).format(n)),i&&(0==this.form_vars[e].currency_position?c=s+c:c+=s),c},price_request_toggle:function(e,t,a){var r=jQuery(".ezfc-form[data-id='"+e+"']");t?(this.price_old_global[e]=0,this.form_vars[e].price_requested=1,this.calculate_price(r),this.set_price(r,null,a),this.set_submit_text(r)):(this.form_vars[e].price_requested=0,jQuery(r).find(".ezfc-price-value").text(this.form_vars[e].price_show_request_before),jQuery(r).find(".ezfc-submit").val(this.form_vars[e].submit_text.request))},set_subtotal_values:function(e){var t=this,a=["subtotal","set","numbers"];jQuery(a).each(function(a,r){jQuery(e).find("[data-element='"+r+"']").each(function(a,i){var n,s,c=jQuery(i).find(".ezfc-element-"+r),o=t.normalize_value(c.val()),l=null;c.data("settings")&&(n=c.data("settings"),l=n.price_format),s=t.format_price(jQuery(e).data("id"),o,null,l),jQuery(i).find(".ezfc-text").text(s)})})},scroll:function(){jQuery(".ezfc-fixed-price").each(function(){var e=jQuery(this).offset(),t=jQuery(this).data("id"),a=jQuery(".ezfc-form[data-id='"+t+"']"),r=a.outerHeight(),i=a.offset(),n=jQuery(window).scrollTop(),s=parseFloat(EZFC.form_vars[t].price_position_scroll_top),c=i.top-n-s;c<0&&c>-r&&jQuery(this).offset({top:n+s}),c>0&&e.top>i.top&&jQuery(this).offset({top:i.top})})},reset_disabled_fields:function(e,t){var a=jQuery(e).closest(".ezfc-wrapper");jQuery(e).find(".ezfc-custom-hidden").each(function(){jQuery.each(jQuery(this).find("input, :selected"),function(e,t){jQuery(this).val(jQuery(this).data("index")).removeAttr("disabled")})}),a.find(".ezfc-payment-submit, .ezfc-payment-cancel").prop("disabled",!1),this.set_submit_text(e,t)},reset_form:function(e){this.init_form(e),e.find(".ezfc-custom-element").each(function(){var e=jQuery(this).data("element"),t=jQuery(this).find("[data-initvalue]").data("initvalue");switch(e){case"checkbox":jQuery(this).find("input").each(function(){t=jQuery(this).data("initvalue"),1==t?jQuery(this).prop("checked",!0):jQuery(this).removeAttr("checked")});break;case"dropdown":jQuery(this).find("option").removeAttr("selected"),jQuery(this).find("option[data-index='"+t+"']").prop("selected",!0);break;case"numbers":jQuery(this).find("input").val(t);var a=jQuery(this).find(".ezfc-slider-element");a.length&&a.slider({value:t});break;case"radio":jQuery(this).find("input").removeAttr("checked"),jQuery(this).find("input[data-initvalue]").prop("checked",!0);break;case"textfield":jQuery(this).find("textarea").val(t);break;default:jQuery(this).find("input").val(t)}}),e.find(".ezfc-selected").removeClass("ezfc-selected"),this.set_step(e,0,0),this.form_change(e)},set_step:function(e,t,a){var r=this,i=parseInt(e.find(".ezfc-step-active").data("step")),n=e.find(".ezfc-step[data-step='"+i+"']"),s=e.data("id");if(i!=t){if(1==a&&1==this.form_vars[s].verify_steps){var c=e.find(".ezfc-submit-icon");return c.fadeIn(),this.form_submit(e,t-1),void jQuery(".ezfc-has-hidden-placeholder").val("").removeClass("ezfc-has-hidden-placeholder")}var o=parseInt(this.form_vars[s].step_indicator_start)-1;return n.fadeOut(200,function(){var a=e.find(".ezfc-step[data-step='"+t+"']");a.fadeIn(200).addClass("ezfc-step-active"),jQuery(this).removeClass("ezfc-step-active"),t>=o?e.find(".ezfc-step-indicator").fadeIn():e.find(".ezfc-step-indicator").hide(),r.scroll_to(a)}),e.find(".ezfc-step-indicator-item").each(function(){var e=parseInt(jQuery(this).data("step"));jQuery(this).removeClass("ezfc-step-indicator-item-active"),e<=t&&jQuery(this).addClass("ezfc-step-indicator-item-active")}),!1}},scroll_to:function(e,t){var a=jQuery(e).offset();if("undefined"!=typeof a&&0!=ezfc_vars.auto_scroll_steps){var r=parseFloat(t)||parseFloat(ezfc_vars.scroll_steps_offset)||50,i=a.top+r;jQuery("html, body").animate({scrollTop:i})}},get_value_from_element:function(e,t,a,r,i){var n=this,s={return_array:!1,return_value:"value"};if(i=jQuery.extend({},s,i),e||(e=jQuery("#ezfc_element-"+t)),!e.length)return this.debug_message("Unable to find element #"+t),0;var c=e.data("element"),o=e.find("input").val(),l=o?o.indexOf("%")>=0:0,d=l?this.normalize_value(o,!1,!0):this.normalize_value(o),u=d/100;d&&!isNaN(d)||(d=0);var f=a?d:parseFloat(d);switch(c){case"subtotal":case"numbers":case"hidden":case"extension":case"set":var _=e.find("input"),p=parseFloat(_.data("factor"));p&&!isNaN(p)||0===p||(p=1),f=a?o:r?d:d*p;break;case"dropdown":case"radio":case"checkbox":e.find(":selected, :checked").each(function(){if(a){var e=i.return_value;"object"!=typeof f&&(f=[]),f.push(jQuery(this).data(e))}else f+=parseFloat(jQuery(this).data("value"))});break;case"daterange":var m=[e.find(".ezfc-element-daterange-from").datepicker("getDate"),e.find(".ezfc-element-daterange-to").datepicker("getDate")],p=parseFloat(e.find(".ezfc-element-daterange-from").data("factor"));if(p&&!isNaN(p)||0===p||(p=1),a)f=m;else{var h=n.jqueryui_date_diff(m[0],m[1],e.data("workdays_only"));f=r?h:h*p}break;case"custom_calculation":f=e.find(".ezfc-element-custom-calculation-input").val(),a||(f=parseFloat(f));break;case"starrating":f=parseFloat(e.find(":checked").val()),isNaN(f)&&(f=0)}return l&&(f=price*u),a?f:(isNaN(f)&&(f=0),f?parseFloat(f):0)},clear_hidden_values:function(e){var t=jQuery(e).data("id");1==this.form_vars[t].clear_selected_values_hidden&&jQuery(e).find(".ezfc-custom-hidden").each(function(){jQuery(this).find("input[type='text']").val(""),jQuery(this).find(":checkbox, :radio").prop("checked",!1)})},clear_hidden_values_element:function(e){var t=e.data("element");"input"==t||"numbers"==t||"subtotal"==t?cond_target.find("input").val(""):"dropdown"==t?cond_target.find(":selected").removeAttr("selected"):"radio"!=t&&"checkbox"!=t||cond_target.find(":checked").removeAttr("checked")},normalize_value:function(e,t,a){var r=ezfc_vars.price_format_dec_point,i=String(e);return r.length<1&&(r="."),t?","==r&&(i=i.replace(",",""),i=i.replace(".",",")):","==r&&(i=i.replace(".",""),i=i.replace(",",".")),a&&(i.indexOf("%")>=0&&(i=i.replace("%","")),i=parseFloat(i),isNaN(i)&&(i=0)),i},set_submit_text:function(e,t){var a=jQuery(e).data("id"),r=jQuery(e).find(".ezfc-submit"),i="default",n=this.form_vars[a].submit_text.default;if(1==this.form_vars[a].price_show_request){if(this.form_vars[a].price_requested&&!t||(n=this.form_vars[a].submit_text.request,i="request"),t)return this.price_request_toggle(a,!1),!1}else if(1==this.form_vars[a].summary_enabled&&0==this.form_vars[a].summary_shown)i="summary",n=this.form_vars[a].submit_text.summary;else if(1==this.form_vars[a].use_paypal)i="paypal",n=this.form_vars[a].submit_text.paypal;else if(1==this.form_vars[a].payment_force_stripe)i="stripe",n=this.form_vars[a].submit_text.stripe;else if(1==this.form_vars[a].use_woocommerce)i="woocommerce",n=this.form_vars[a].submit_text.woocommerce;else{n=this.form_vars[a].submit_text.default;var s=jQuery(e).find(".ezfc-element-wrapper-payment");if(s.length>0){var c=jQuery(s).find(":checked").data("value");"undefined"!=typeof this.form_vars[a].submit_text[c]&&(i=c,n=this.form_vars[a].submit_text[c])}}r.val(n),r.data("type",i)},prevent_enter_step_listener:function(e,t){jQuery(e).keypress(function(e){e.keyCode||e.which;13==e.which&&e.preventDefault()})},call_hook:function(e,t){var a=window[e];"function"==typeof a&&(t=t||{},a(t))},stripe_response_handler:function(e,t){var a=EZFC,r=jQuery(".ezfc-form[data-id='"+a.payment_form_id+"']"),i=jQuery(".ezfc-payment-form[data-form_id='"+a.payment_form_id+"']");if(t.error)a.debug_message(t.error.message),jQuery("#ezfc-payment-message-"+a.payment_form_id).text(t.error.message),i.find(".ezfc-payment-submit, .ezfc-payment-cancel").prop("disabled",!1),setTimeout(function(){jQuery("#ezfc-payment-message-"+a.payment_form_id).text("")},7500);else{var n=t.id;r.find("#ezfc-stripetoken-"+a.payment_form_id).val(n),a.form_submit(r,-1,"stripe-checkout")}},get_target_subtotal_value:function(e,t,a){for(i in this.subtotals[e])if(this.subtotals[e][i].el_id==t)return a?"undefined"!=typeof this.subtotals[e][i-1]?this.subtotals[e][i-1].price:0:this.subtotals[e][i].price;return null},get_calculated_element_value:function(e,t){var a=jQuery("#ezfc-form-"+e),r=jQuery("#ezfc_element-"+t),i=r.data("element"),n=this.calculate_element_loop(e,r,i,0);return n=this.calculate_discounts(a,e,r,i,n)},set_message:function(e,t){var a=jQuery("#ezfc-form-"+e);if(!a)return!1;var r,i=a.closest(".ezfc-wrapper");return r=i.find(".ezfc-payment-dialog-open").length>0?i.find(".ezfc-payment-errors"):a.parents(".ezfc-wrapper").find(".ezfc-message"),!r.length&&console?(console.log(t),!1):void r.text(t).fadeIn().delay(7500).fadeOut()},recaptcha_reload:function(){var e=jQuery(".ezfc-form .g-recaptcha").length;e&&"undefined"!=typeof grecaptcha&&grecaptcha.reset()},populate_html_placeholders:function(e){var t=this;e.find(".ezfc-html-placeholder").each(function(a,r){var i=t.functions.get_element_id_by_name(e.data("id"),jQuery(r).data("listen_target"));if(i){var n=t.functions.get_value_from(i,!0);n=jQuery.trim(n),jQuery(r).text(n)}})},toggle_group:function(e){var t=e.find("> .ezfc-group-elements").first();t.slideToggle(500);var a="fa-chevron-circle-down",r="fa-chevron-circle-right",i=e.find(".ezfc-collapse-icon i").first();i.hasClass(a)?i.removeClass(a).addClass(r):i.removeClass(r).addClass(a)},show_tip:function(e,t,a,r){var i=new Opentip(e,{background:ezfc_vars.opentip.background||"yellow",delay:a,hideDelay:.1,hideTriggers:["closeButton","target"],removeElementsOnHide:!0,showOn:null,target:t,tipJoint:ezfc_vars.required_text_position||"middle right"});i.setContent(r),i.show()},remove_debug_info:function(){jQuery(".ezfc-debug-info").remove()},add_debug_info:function(e,t,a){if(2==ezfc_vars.debug_mode){var e=jQuery(t).data("element");if("group"!=e){var r=jQuery(t).attr("id");r&&(r=r.split("ezfc_element-")[1]);var i=jQuery(t).data("element");jQuery(t).append("<pre class='ezfc-debug-info ezfc-debug-type-"+e+"'>[["+i+" #"+r+"]]\n["+e+"]\n"+a+"</pre>"),console.log(a,t)}}},debug_message:function(e){0!=ezfc_vars.debug_mode&&console.log(e)},jqueryui_date_diff:function(e,t,a){if(!e||!t)return 0;var r=0;if(a){var i,n,s=function(e,t,a){return e==t?a:e};i=t-e,i/=864e5,daysBeforeFirstSunday=(7-e.getDay())%7,n=t.getDay(),i-=daysBeforeFirstSunday+n,i=i/7*5,i+=s(daysBeforeFirstSunday-1,-1,0)+s(n,6,5),r=Math.ceil(i)}else r=(t-e)/1e3/60/60/24;return r}},ezfc_functions={},jQuery(document).ready(function(){EZFC.init()});